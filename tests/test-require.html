<!DOCTYPE html>
<html>
<head>
    <title>Test require</title>
    <link rel='stylesheet' type='text/css' href='../styles/tests.css'/>
    <link rel='icon' type='image/png' href='../images/gear2.png'>
    <script src='../lib/jquery.js'></script>
    <script src='../lib/underscore.js'></script>
    <script src='../require-scripts.js'></script>

</head>
<body>
<a href='../'>../</a>

<h1>Test require(modules.js)</h1>

<p id='verify'>
    <button class='test'>all</button>
    <br/>
</p>
<div class='console'>
</div>

<script>
    window.onload = function () {
        var verify = {
            'three.js': ['BoxGeometry', 'Vector3', 'Mesh'],
            'ammo.js': ['btVector3'],
            'underscore.js': ['each', 'map', 'pick', 'pluck'],
            'jquery.js': ['ajax', 'css', 'attr', 'text', 'parseJSON', 'parseXML'],
            'test-utils.js': ['run', 'all'],
            'factory.js': ['addLibrary', 'make','structure','options'],
            '/ware/basic.js': ['shape', 'scene']
        };
        var $verify = $('#verify');
        for (var i in verify) {
          $verify.append("<button class='test'>" + i + "</button>");
        }
        var utils = require('test-utils.js', undefined);

        //preamble
        setConsole('.console');
        console.log('example of console.log');
        console.error('example of console.error');
        console.warn('example of console.warn');
        console.info('example of console.info');
        setConsole(null);

        $('.test').click(function (event) {
            var library = $(event.target).text();
            if (library == 'all') {
                for(var i in verify){
                    runRequireTest(i);
                }
            } else {
                runRequireTest(library);
            }
            function runRequireTest(library) {
                setConsole('.console');
                setTimeout(function () {
                    console.log('\n-------------', library, '---------------\n');
                    var obj = require(library, undefined);
                    utils.checkKeys(obj, verify[library], 'check keys in ' + library);
                    //setConsole(null);
                }, 100);
            }
        });
    };


</script>
</body>
</html>